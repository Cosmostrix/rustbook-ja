## リリースプロファイルを使用した組み上げのカスタマイズ

Rustでは、*リリースプロファイル*は、演譜師が譜面を製譜するためのさまざまな選択肢をより詳細に制御できるように、構成が異なる事前定義されたカスタマイズ可能なプロファイルです。
各プロファイルは他のプロファイルとは独立して構成されています。

カーゴは、主に2つのプロファイルを持っている。 `dev`あなたが実行したときに、プロファイルカーゴが使用する`cargo build`し、`release`、あなたが実行したときに、プロファイルカーゴが使用する`cargo build --release`。
`dev`プロファイルは、開発のための良い自動的に定義され、`release`リリース組み上げ用のプロファイルが良い黙用値を持っています。

これらのプロファイル名は、組み上げの出力に慣れている可能性があります。

```text
$ cargo build
    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs
$ cargo build --release
    Finished release [optimized] target(s) in 0.0 secs
```

`dev`と`release`この組み上げ出力に示されているが、製譜器が異なるプロファイルを使用していることを示しています。

Cargoには、企画の*Cargo.toml*ファイルに`[profile.*]`章がない場合に適用される各プロファイルの黙用設定があります。
カスタマイズするプロファイルの`[profile.*]`章を追加することで、黙用設定の下位セットを上書きできます。
たとえば、`dev`および`release`プロファイルの`opt-level`設定の黙用値は次のとおりです。

<span class="filename">ファイル名。Cargo.toml</span>

```toml
[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3
```

`opt-level`設定では、Rustが譜面に適用される最適化の回数を0〜3の範囲で制御します。さらに最適化を適用すると製譜時間が延びるので、譜面を頻繁に開発して製譜する場合は、結果の譜面が遅く実行されても製譜できます。
これが`dev`黙用の`opt-level`が`0`ある理由です。
譜面をリリースする準備ができたら、製譜にもっと時間を費やすのが最善です。
一度だけリリースモードで製譜しますが、製譜された算譜は何度も実行されるため、リリースモードはより速く実行される譜面の製譜時間を長くします。
そのため、`release`プロファイルの黙用`opt-level`は`3`です。

*Cargo.tomlに*別の値を追加することで、黙用設定を上書きすることができます。
たとえば、開発プロファイルで最適化レベル1を使用する場合は、企画の*Cargo.toml*ファイルに次の2行を追加できます。

<span class="filename">ファイル名。Cargo.toml</span>

```toml
[profile.dev]
opt-level = 1
```

この譜面は、黙用設定の`0`上書きします。
実行すると`cargo build`、カーゴはのための黙用値を使用します`dev`ためにプロファイルに加えて、当社のカスタマイズを`opt-level`。
`opt-level`を`1`設定しているので、Cargoは黙用よりも多くの最適化を適用しますが、リリース組み上げの場合ほど多くは適用しません。

各プロファイルの設定選択肢と黙用の完全なリストについては、[Cargoの開発資料を](https://doc.rust-lang.org/cargo/)参照してください。
