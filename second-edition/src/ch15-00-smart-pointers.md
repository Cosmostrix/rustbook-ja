# スマート<ruby>指し手<rt>ポインタ</rt></ruby>

*<ruby>指し手<rt>ポインタ</rt></ruby>*は、記憶内の番地を含む変数の一般概念です。
この番地は、他のそれ用のデータを参照するか、または「ポイントする」。
Rustの<ruby>指し手<rt>ポインタ</rt></ruby>の最も一般的な種類は、第4章で学んだ参照です。参照は`&`記号で示され、それらが示す値を借ります。
データを参照する以外に特別な機能はありません。
また、それらにはオーバーヘッドがなく、最も頻繁に使用する<ruby>指し手<rt>ポインタ</rt></ruby>のようなものです。

一方、*スマート<ruby>指し手<rt>ポインタ</rt></ruby>*は、<ruby>指し手<rt>ポインタ</rt></ruby>のように動作するだけでなく、追加のメタデータと機能を持つデータ構造です。
スマート<ruby>指し手<rt>ポインタ</rt></ruby>の概念はRustにとってユニークではない。スマート<ruby>指し手<rt>ポインタ</rt></ruby>はC ++で作成され、他の言語でも存在します。
Rustでは、標準<ruby>譜集<rt>ライブラリー</rt></ruby>で定義されたさまざまなスマート<ruby>指し手<rt>ポインタ</rt></ruby>は、参照によって提供される機能を超えた機能を提供します。
この章で取り上げる1つの例は、*参照カウント*スマート<ruby>指し手<rt>ポインタ</rt></ruby>型です。
この<ruby>指し手<rt>ポインタ</rt></ruby>を使用すると、所有者の数を追跡し、所有者がいない場合はデータを後始末することによって、複数のデータ所有者を持つことができます。

所有権と借用の概念を使用するRustでは、参照とスマート<ruby>指し手<rt>ポインタ</rt></ruby>の追加の違いは、参照はデータを借りるだけの<ruby>指し手<rt>ポインタ</rt></ruby>であることです。
対照的に、多くの場合、スマート<ruby>指し手<rt>ポインタ</rt></ruby>はそれらが指すデータを*所有し*ています。

この本では、第8章の`String`や`Vec<T>`などのスマート<ruby>指し手<rt>ポインタ</rt></ruby>については、すでにスマート<ruby>指し手<rt>ポインタ</rt></ruby>とは呼ばれていませんでしたが、ここでは遭遇しました。
これらの型はどちらもスマート<ruby>指し手<rt>ポインタ</rt></ruby>としてカウントされます。これは、記憶を所有していて、操作できるようにするためです。
また、メタデータ（容量など）と追加の機能や保証（データが常に有効なUTF-8であることを保証する`String`など）もあります。

スマート<ruby>指し手<rt>ポインタ</rt></ruby>は、通常、構造体を使用して実装されます。
通常の構造体からスマート<ruby>指し手<rt>ポインタ</rt></ruby>を区別する<ruby>特性<rt>トレイト</rt></ruby>は、スマート<ruby>指し手<rt>ポインタ</rt></ruby>が`Deref`および`Drop`<ruby>特性<rt>トレイト</rt></ruby>を実装することです。
`Deref`特徴は、スマート<ruby>指し手<rt>ポインタ</rt></ruby>構造体の<ruby>実例<rt>インスタンス</rt></ruby>を参照のように振る舞うことができるように、参照やスマート<ruby>指し手<rt>ポインタ</rt></ruby>のどちらでも動作する<ruby>譜面<rt>コード</rt></ruby>を書くことができます。
`Drop`<ruby>特性<rt>トレイト</rt></ruby>を使用すると、スマート<ruby>指し手<rt>ポインタ</rt></ruby>の<ruby>実例<rt>インスタンス</rt></ruby>が<ruby>有効範囲<rt>スコープ</rt></ruby>外になったときに実行される<ruby>譜面<rt>コード</rt></ruby>をカスタマイズできます。
この章では、両方の特徴について説明し、それらがスマート<ruby>指し手<rt>ポインタ</rt></ruby>にとってなぜ重要であるかを説明します。

スマート<ruby>指し手<rt>ポインタ</rt></ruby>パターンがRustで頻繁に使用される一般的な設計パターンであることを考えると、この章では既存のスマート<ruby>指し手<rt>ポインタ</rt></ruby>はすべてカバーしません。
多くの<ruby>譜集<rt>ライブラリー</rt></ruby>には独自のスマート<ruby>指し手<rt>ポインタ</rt></ruby>があり、自分で書くこともできます。
標準<ruby>譜集<rt>ライブラリー</rt></ruby>で最も一般的なスマート<ruby>指し手<rt>ポインタ</rt></ruby>について説明します。

* 原上に値を割り当てるための`Box<T>`
* 複数の所有権を持つ参照カウント型の`Rc<T>`
* `Ref<T>`と`RefMut<T>`を介してアクセスし、`RefCell<T>`実行時の代わりに<ruby>製譜<rt>コンパイル</rt></ruby>時に借用ルールを施行型

さらに、不変型が内部値を変更するためのAPIを<ruby>公開<rt>パブリック</rt></ruby>している*内部の可変*パターンについても説明します。
*参照円環*については、<ruby>記憶域<rt>メモリー</rt></ruby>のリークやその防止方法についても説明します。

中に潜んでみましょう！　
